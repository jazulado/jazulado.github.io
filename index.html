<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pixi.js/5.1.3/pixi.min.js"></script>
</head>
<body>
    <script type="text/javascript">
    let width = 600
    let height = 600
      let type = "WebGL"
      if(!PIXI.utils.isWebGLSupported()){
        type = "canvas"
      }
      let app = new PIXI.Application({ 
    width: width, 
    height: height,                       
    antialias: true, 
    transparent: false, 
    resolution: 1
  }
);

//Add the canvas that Pixi automatically created for you to the HTML document
document.body.appendChild(app.view);

//load an image and run the `setup` function when it's done
PIXI.loader
  .add("texture/kid.svg")
  .add("texture/grass.png")
  .add("texture/arriba.png")
  .add("texture/abajo.png")
  .add("texture/izquierda.png")
  .add("texture/derecha.png")
  .load(setup);
  let dungeon = PIXI.Sprite.from("texture/grass.png");
  let arriba = PIXI.Texture.from('texture/arriba.png');
  let abajo = PIXI.Texture.from('texture/abajo.png');
  let izquierda = PIXI.Texture.from('texture/izquierda.png');
  let derecha = PIXI.Texture.from('texture/derecha.png');
  let sprite = new PIXI.Sprite(abajo);
//This `setup` function will run when the image has loaded
  function generateBackground() {
    for (let w = 0; w < width/100; w++) {
      for (let h = 0; h < height/100; h++) {
        var dun = PIXI.Sprite.from("texture/grass.png");
        dun.width = 100;
        dun.height = 100;
        dun.position.set(w*100, h*100)
        app.stage.addChild(dun);

        
      }
      
    }
  }
  generateBackground()
  function setup() {
    sprite.position.set(20, 20)
    sprite.width = sprite.width*2;
    sprite.height = sprite.height*2 ;
    dungeon.width = 100;
    dungeon.height = 100;
    app.stage.addChild(dungeon);
    app.stage.addChild(sprite);
  }
    document.addEventListener('keydown', function(event){
      //alert(event.keyCode);
      switch (event.keyCode) {
        
        case 65:
          sprite.x = sprite.x -5
          sprite.texture = izquierda;
          break;
        case 68:
          
        sprite.x = sprite.x +5
          sprite.texture = derecha;
          break;
        case 87:
        sprite.y = sprite.y -5
          sprite.texture = arriba;
          
          break;
        case 83:
        sprite.y = sprite.y +5
          sprite.texture = abajo;
          
          break;
      
        default:
          break;
      }
  } );
  //app.stage.removeChild(sprite)
    </script>
    
</body>
</html>